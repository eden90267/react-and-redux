# chap02. 設計高質量的React組件

高質量組件：

- 不要只滿足於編寫出可運行的帶碼，而要了解代碼背後的工作原理
- 不要只滿足於自己編寫的程序能夠執行，還要讓自己的代碼可讀而且易於維護

## 易於維護組件的設計要素

就像一個人最好只專注做一件事情一樣，組件也應該盡量保持只做一件事。當開發者發現一個組件功能太多，就要考慮拆分這些組件，用多個小組件來代替。每個小組建只專注實現單個功能，但是將這些功能組合起來，也能滿足複雜的實際需求。

這就是“分而治之”的策略。但不要濫用，只有必要的時候才去拆分組件，否則得不償失。

拆分組件最關鍵的就是確定組件的邊界，每個組件都應該是可以獨立存在的，如果兩個組件邏輯太緊密，無法清晰定義各自責任，那這兩個組件本身就不該被拆開，作為同一組件可能更合理。

但也不是說組件就是孤島一樣的存在，不同組件之間總是會有**通信交流**，這樣才可能組合起來完成更大的功能。

作為軟件設計的通則，組件劃分要滿足高內聚(Higi Cohesion)和低耦合(Low Coupling)的原則。

**高內聚**指的是把邏輯緊密相關的內容放在一個組件中。用戶介面無外乎內容、交互行為和樣式。傳統HTML、JavaScript與CSS文件各自分開定義，雖然滿足功能模組的需要，卻要在三個不同文件中，這其實不滿足高內聚的原則。React卻不是這樣，展示內容的JSX、定義行為的JavaScript，甚至定義樣式的CSS，都可以放在一個JavaScript文件中，因為他們**本來就是為了實現一個目的而存在的**，所以說React天生具有高內聚的特點。

**低耦合**指的是不同組件之間的依賴關係要盡量弱化，也就是每個組件要盡量獨立。保持整個系統的低耦合度，需要對系統中的功能有充分認識，然後根據功能點劃分模組，讓不同的組件去實現不同的功能。不過，React組件對外接口非常規範，方便開發者設計低耦合系統。

要充分應用這些原則，需要對React的特性有充分的認識。

## React組件的數據

>差勁的程序員操心代碼，優秀的程序員操心數據結構和它們之間的關係(Linus Torvalds，Linux創始人)

如何組織數據是程序最重要問題。

React組件的數據分成兩種，prop和state，無論prop或state的改變，都可能引發組件的重新渲染，那麼，設計一個組件的時候，什麼時候該選prop什麼時候該選state?原則很簡單，prop是組件的對外接口，state是組件的內部狀態，對外用prop，內部用state。

演示屬性的使用，建構兩個組件，Counter組件和ControlPanel組件，ControlPanel是父組件，包含若干個Counter組件：